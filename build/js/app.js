"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function slideDown(t,e){e=e||"300ms ease",t.style.webkitTransition="initial",t.style.transition="initial",t.style.visibility="hidden",t.style.maxHeight="initial";var i=t.offsetHeight+"px";t.style.removeProperty("visibility"),t.style.maxHeight="0",t.style.overflow="hidden",t.style.webkitTransition="max-height "+e+", opacity "+e,t.style.transition="max-height "+e+", opacity "+e;var n=function o(){t.style.removeProperty("-webkit-transition"),t.style.removeProperty("transition"),t.style.removeProperty("opacity"),t.removeEventListener("transitionend",o)};requestAnimationFrame(function(){t.addEventListener("transitionend",n),t.style.maxHeight=i,t.style.opacity="1"})}function slideUp(t,e){e=e||"300ms ease",t.style.webkitTransition="initial",t.style.transition="initial";var i=t.offsetHeight+"px";t.style.maxHeight=i,t.style.overflow="hidden",t.style.webkitTransition="max-height "+e+", opacity "+e,t.style.transition="max-height "+e+", opacity "+e;var n=function o(){t.style.removeProperty("-webkit-transition"),t.style.removeProperty("transition"),t.style.removeProperty("opacity"),t.removeEventListener("transitionend",o)};requestAnimationFrame(function(){t.addEventListener("transitionend",n),t.style.maxHeight="0",t.style.opacity="0"})}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),scrollTo=function(t,e){var i=document.scrollingElement||document.documentElement,n=i.scrollTop,o=t-n,r=+new Date,s=function(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)},l=function a(){var l=+new Date,c=l-r;i.scrollTop=parseInt(s(c,n,o,e)),c<e?requestAnimationFrame(a):i.scrollTop=t};l()};Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var Dropdown=function(){function t(e){_classCallCheck(this,t),this.container=e,this.contents=this.container.querySelectorAll(".js-dropdown-item-content"),this.links=this.container.querySelectorAll(".js-dropdown-item-link"),this.init()}return _createClass(t,[{key:"init",value:function(){this.container.addEventListener("click",this.updateDropdown.bind(this))}},{key:"updateDropdown",value:function(t){var e=t.target;if(e.classList.contains("js-dropdown-item-link")){t.preventDefault();var i=e.closest(".js-dropdown-item"),n=i.querySelector(".js-dropdown-item-content");e.classList.contains("is-active")?this.clearDropdown():(this.clearDropdown(),e.classList.add("is-active"),slideDown(n))}}},{key:"clearDropdown",value:function(){var t=!0,e=!1,i=void 0;try{for(var n,o=this.links[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var r=n.value;r.classList.remove("is-active")}}catch(s){e=!0,i=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw i}}var l=!0,a=!1,c=void 0;try{for(var u,y=this.contents[Symbol.iterator]();!(l=(u=y.next()).done);l=!0){var r=u.value;slideUp(r)}}catch(s){a=!0,c=s}finally{try{!l&&y["return"]&&y["return"]()}finally{if(a)throw c}}}}]),t}(),Menu=function(){function t(e){_classCallCheck(this,t),this.container=e,this.menuScroll=this.container.querySelector(".js-menu-scroll"),this.menuScrollTarget=document.querySelector(".js-menu-show"),this.init()}return _createClass(t,[{key:"init",value:function(){window.addEventListener("scroll",this.checkMenuPosition.bind(this)),window.addEventListener("resize",this.checkMenuPosition.bind(this)),document.body.addEventListener("click",this.scrollToElement.bind(this))}},{key:"checkMenuPosition",value:function(){var t=this.menuScrollTarget.getBoundingClientRect(),e=t.top;e<0?this.menuScroll.classList.add("is-active"):this.menuScroll.classList.remove("is-active")}},{key:"scrollToElement",value:function(t){var e=t.target;if(e.classList.contains("js-menu-link-scroll")){t.preventDefault();var i=65,n=document.querySelector(e.getAttribute("href")),o=n.getBoundingClientRect(),r=o.top+window.pageYOffset-i;scrollTo(r,1e3)}}}]),t}(),Toggle=function(){function t(){_classCallCheck(this,t),this.init()}return _createClass(t,[{key:"init",value:function(){document.body.addEventListener("click",this.toggleSwitch.bind(this))}},{key:"toggleSwitch",value:function(t){var e=t.target;if(e.classList.contains("js-toggle-link")){t.preventDefault();var i=e.closest(".js-toggle-container"),n=i.querySelector(".js-toggle-content");e.classList.contains("is-active")?(e.classList.remove("is-active"),n.style.display="none"):(e.classList.add("is-active"),n.style.display="block")}}}]),t}(),Tooltips=function(){function t(){_classCallCheck(this,t),this.tooltipContents=document.body.querySelectorAll(".js-tooltip-content"),this.tooltipLinks=document.body.querySelectorAll(".js-tooltip-link"),this.init()}return _createClass(t,[{key:"init",value:function(){document.body.addEventListener("click",this.toggleTooltip.bind(this))}},{key:"toggleTooltip",value:function(t){var e=t.target;if(e.classList.contains("js-tooltip-link")){t.preventDefault();var i=e.closest(".js-tooltip-container"),n=i.querySelector(".js-tooltip-content");e.classList.contains("is-active")?this.clearTooltips():(this.clearTooltips(),e.classList.add("is-active"),n.classList.add("is-active"))}else this.clearTooltips()}},{key:"clearTooltips",value:function(){var t=!0,e=!1,i=void 0;try{for(var n,o=this.tooltipContents[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var r=n.value;r.classList.remove("is-active")}}catch(s){e=!0,i=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw i}}var l=!0,a=!1,c=void 0;try{for(var u,y=this.tooltipLinks[Symbol.iterator]();!(l=(u=y.next()).done);l=!0){var r=u.value;r.classList.remove("is-active")}}catch(s){a=!0,c=s}finally{try{!l&&y["return"]&&y["return"]()}finally{if(a)throw c}}}}]),t}(),Viewer=function(){function t(){_classCallCheck(this,t),this.init()}return _createClass(t,[{key:"init",value:function(){this.initClasses()}},{key:"initClasses",value:function(){var t=document.querySelectorAll(".js-dropdown-container"),e=!0,i=!1,n=void 0;try{for(var o,r=t[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value;new Dropdown(s)}}catch(l){i=!0,n=l}finally{try{!e&&r["return"]&&r["return"]()}finally{if(i)throw n}}var a=document.querySelectorAll(".js-menu-container"),c=!0,u=!1,y=void 0;try{for(var d,v=a[Symbol.iterator]();!(c=(d=v.next()).done);c=!0){var s=d.value;new Menu(s)}}catch(l){u=!0,y=l}finally{try{!c&&v["return"]&&v["return"]()}finally{if(u)throw y}}document.querySelectorAll(".js-tooltip-link").length&&new Tooltips,document.querySelectorAll(".js-toggle-link").length&&new Toggle}}]),t}();document.addEventListener("DOMContentLoaded",function(){new Viewer});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwic2xpZGVEb3duIiwiZWwiLCJ0aW1pbmciLCJzdHlsZSIsIndlYmtpdFRyYW5zaXRpb24iLCJ0cmFuc2l0aW9uIiwidmlzaWJpbGl0eSIsIm1heEhlaWdodCIsImhlaWdodCIsIm9mZnNldEhlaWdodCIsInJlbW92ZVByb3BlcnR5Iiwib3ZlcmZsb3ciLCJlbmRTbGlkZURvd24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9wYWNpdHkiLCJzbGlkZVVwIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsInNjcm9sbFRvIiwidG8iLCJkdXJhdGlvbiIsImVsZW1lbnQiLCJkb2N1bWVudCIsInNjcm9sbGluZ0VsZW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzdGFydCIsInNjcm9sbFRvcCIsImNoYW5nZSIsInN0YXJ0RGF0ZSIsIkRhdGUiLCJlYXNlSW5PdXRRdWFkIiwidCIsImIiLCJjIiwiZCIsImFuaW1hdGVTY3JvbGwiLCJjdXJyZW50RGF0ZSIsImN1cnJlbnRUaW1lIiwicGFyc2VJbnQiLCJFbGVtZW50IiwibWF0Y2hlcyIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwiY2xvc2VzdCIsInMiLCJ0aGlzIiwiY29udGFpbnMiLCJwYXJlbnRFbGVtZW50IiwicGFyZW50Tm9kZSIsIm5vZGVUeXBlIiwiRHJvcGRvd24iLCJjb250YWluZXIiLCJjb250ZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsaW5rcyIsImluaXQiLCJ2YWx1ZSIsInVwZGF0ZURyb3Bkb3duIiwiYmluZCIsImUiLCJjbGFzc0xpc3QiLCJwcmV2ZW50RGVmYXVsdCIsInBhcmVudCIsImNvbnRlbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xlYXJEcm9wZG93biIsImFkZCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwidW5kZWZpbmVkIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwicmVtb3ZlIiwiZXJyIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIiLCJfZGlkSXRlcmF0b3JFcnJvcjIiLCJfaXRlcmF0b3JFcnJvcjIiLCJfc3RlcDIiLCJfaXRlcmF0b3IyIiwiTWVudSIsIm1lbnVTY3JvbGwiLCJtZW51U2Nyb2xsVGFyZ2V0Iiwid2luZG93IiwiY2hlY2tNZW51UG9zaXRpb24iLCJib2R5Iiwic2Nyb2xsVG9FbGVtZW50IiwidGFyZ2V0UG9zaXRpb24iLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0YXJnZXRQb3NpdGlvblRvcCIsInRvcCIsIk1FTlVfSEVJR0hUIiwiZ2V0QXR0cmlidXRlIiwicGFnZVlPZmZzZXQiLCJUb2dnbGUiLCJ0b2dnbGVTd2l0Y2giLCJkaXNwbGF5IiwiVG9vbHRpcHMiLCJ0b29sdGlwQ29udGVudHMiLCJ0b29sdGlwTGlua3MiLCJ0b2dnbGVUb29sdGlwIiwiY2xlYXJUb29sdGlwcyIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zIiwiX2RpZEl0ZXJhdG9yRXJyb3IzIiwiX2l0ZXJhdG9yRXJyb3IzIiwiX3N0ZXAzIiwiX2l0ZXJhdG9yMyIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240IiwiX2RpZEl0ZXJhdG9yRXJyb3I0IiwiX2l0ZXJhdG9yRXJyb3I0IiwiX3N0ZXA0IiwiX2l0ZXJhdG9yNCIsIlZpZXdlciIsImluaXRDbGFzc2VzIiwiZHJvcGRvd25zIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjUiLCJfZGlkSXRlcmF0b3JFcnJvcjUiLCJfaXRlcmF0b3JFcnJvcjUiLCJfc3RlcDUiLCJfaXRlcmF0b3I1IiwibWVudSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb242IiwiX2RpZEl0ZXJhdG9yRXJyb3I2IiwiX2l0ZXJhdG9yRXJyb3I2IiwiX3N0ZXA2IiwiX2l0ZXJhdG9yNiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFJQSxTQUFTQSxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FnRDlHLFFBQVNDLFdBQVVDLEVBQUlDLEdBQ3JCQSxFQUFTQSxHQUFVLGFBR25CRCxFQUFHRSxNQUFNQyxpQkFBbUIsVUFDNUJILEVBQUdFLE1BQU1FLFdBQWEsVUFDdEJKLEVBQUdFLE1BQU1HLFdBQWEsU0FDdEJMLEVBQUdFLE1BQU1JLFVBQVksU0FDckIsSUFBSUMsR0FBU1AsRUFBR1EsYUFBZSxJQUMvQlIsR0FBR0UsTUFBTU8sZUFBZSxjQUN4QlQsRUFBR0UsTUFBTUksVUFBWSxJQUNyQk4sRUFBR0UsTUFBTVEsU0FBVyxTQUdwQlYsRUFBR0UsTUFBTUMsaUJBQW1CLGNBQWdCRixFQUFTLGFBQWVBLEVBQ3BFRCxFQUFHRSxNQUFNRSxXQUFhLGNBQWdCSCxFQUFTLGFBQWVBLENBQzlELElBQUlVLEdBQWUsUUFBZkEsS0FDRlgsRUFBR0UsTUFBTU8sZUFBZSxzQkFDeEJULEVBQUdFLE1BQU1PLGVBQWUsY0FDeEJULEVBQUdFLE1BQU1PLGVBQWUsV0FDeEJULEVBQUdZLG9CQUFvQixnQkFBaUJELEdBRTFDRSx1QkFBc0IsV0FDcEJiLEVBQUdjLGlCQUFpQixnQkFBaUJILEdBQ3JDWCxFQUFHRSxNQUFNSSxVQUFZQyxFQUNyQlAsRUFBR0UsTUFBTWEsUUFBVSxNQVd2QixRQUFTQyxTQUFRaEIsRUFBSUMsR0FDbkJBLEVBQVNBLEdBQVUsYUFHbkJE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MkMsR0FBQSxFQUErQixDQUFBLEdBQXRCbEcsR0FBc0JxRyxFQUFBbEUsS0FDN0IsSUFBSU4sVUFBUzdCLElBSEgsTUFBQXlELEdBQUEwQyxHQUFBLEVBQUFDLEVBQUEzQyxFQUFBLFFBQUEsS0FBQXlDLEdBQUFJLEVBQUFBLFdBQUFBLEVBQUFBLFlBQUEsUUFBQSxHQUFBSCxFQUFBLEtBQUFDLElBTVosR0FBSUcsR0FBT3RHLFNBQVMrQixpQkFBaUIsc0JBTnpCd0UsR0FBQSxFQUFBQyxHQUFBLEVBQUFDLEVBQUF6RCxNQUFBLEtBT1osSUFBQSxHQUFBMEQsR0FBQUMsRUFBb0JMLEVBQXBCbkQsT0FBQUMsY0FBQW1ELEdBQUFHLEVBQUFDLEVBQUF0RCxRQUFBQyxNQUFBaUQsR0FBQSxFQUEwQixDQUFBLEdBQWpCeEcsR0FBaUIyRyxFQUFBeEUsS0FDeEIsSUFBSTRCLE1BQUsvRCxJQVJDLE1BQUF5RCxHQUFBZ0QsR0FBQSxFQUFBQyxFQUFBakQsRUFBQSxRQUFBLEtBQUErQyxHQUFBSSxFQUFBQSxXQUFBQSxFQUFBQSxZQUFBLFFBQUEsR0FBQUgsRUFBQSxLQUFBQyxJQVdSekcsU0FBUytCLGlCQUFpQixvQkFBb0I5QyxRQUNoRCxHQUFJOEYsVUFHRi9FLFNBQVMrQixpQkFBaUIsbUJBQW1COUMsUUFDL0MsR0FBSTJGLFlBbUxGa0IsSUE5S1Q5RixVQUFTdkIsaUJBQWlCLG1CQUFvQixXQUM1QyxHQUFJcUgiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFRoaXJkIHBhcnR5XG4gKi9cbiAgY29uc3Qgc2Nyb2xsVG8gPSBmdW5jdGlvbih0bywgZHVyYXRpb24pIHtcbiAgICBjb25zdFxuICAgIGVsZW1lbnQgPSBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcbiAgICBzdGFydCA9IGVsZW1lbnQuc2Nyb2xsVG9wLFxuICAgIGNoYW5nZSA9IHRvIC0gc3RhcnQsXG4gICAgc3RhcnREYXRlID0gK25ldyBEYXRlKCksXG4gICAgLy8gdCA9IGN1cnJlbnQgdGltZVxuICAgIC8vIGIgPSBzdGFydCB2YWx1ZVxuICAgIC8vIGMgPSBjaGFuZ2UgaW4gdmFsdWVcbiAgICAvLyBkID0gZHVyYXRpb25cbiAgICBlYXNlSW5PdXRRdWFkID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgdCAvPSBkLzI7XG4gICAgICBpZiAodCA8IDEpIHJldHVybiBjLzIqdCp0ICsgYjtcbiAgICAgIHQtLTtcbiAgICAgIHJldHVybiAtYy8yICogKHQqKHQtMikgLSAxKSArIGI7XG4gICAgfSxcbiAgICBhbmltYXRlU2Nyb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBjdXJyZW50RGF0ZSA9ICtuZXcgRGF0ZSgpO1xuICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBjdXJyZW50RGF0ZSAtIHN0YXJ0RGF0ZTtcbiAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gcGFyc2VJbnQoZWFzZUluT3V0UXVhZChjdXJyZW50VGltZSwgc3RhcnQsIGNoYW5nZSwgZHVyYXRpb24pKTtcbiAgICAgIGlmIChjdXJyZW50VGltZSA8IGR1cmF0aW9uKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlU2Nyb2xsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gdG87XG4gICAgICB9XG4gICAgfTtcbiAgICBhbmltYXRlU2Nyb2xsKCk7XG4gIH07XG4gIGlmICghRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcylcbiAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgPSBFbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3RvciB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvcjtcbiAgXG4gIGlmICghRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdClcbiAgICAgIEVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3QgPSBmdW5jdGlvbihzKSB7XG4gICAgICAgICAgdmFyIGVsID0gdGhpcztcbiAgICAgICAgICBpZiAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyhlbCkpIHJldHVybiBudWxsO1xuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgaWYgKGVsLm1hdGNoZXMocykpIHJldHVybiBlbDtcbiAgICAgICAgICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50IHx8IGVsLnBhcmVudE5vZGU7XG4gICAgICAgICAgfSB3aGlsZSAoZWwgIT09IG51bGwgJiYgZWwubm9kZVR5cGUgPT09IDEpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfTtcbiAgLyoqXG4gICAqIFNsaWRlIGFuIGVsZW1lbnQgZG93biBsaWtlIGpRdWVyeSdzIHNsaWRlRG93biBmdW5jdGlvbiB1c2luZyBDU1MzIHRyYW5zaXRpb25zLlxuICAgKiBAc2VlIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2x1ZGRlci80MjI2Mjg4XG4gICAqIEBwYXJhbSAge2VsZW1lbnR9ICBlbFxuICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgdGltaW5nXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBmdW5jdGlvbiBzbGlkZURvd24oZWwsIHRpbWluZykge1xuICAgIHRpbWluZyA9IHRpbWluZyB8fCAnMzAwbXMgZWFzZSc7XG4gIFxuICAgIC8vIEdldCBlbGVtZW50IGhlaWdodFxuICAgIGVsLnN0eWxlLndlYmtpdFRyYW5zaXRpb24gPSAnaW5pdGlhbCc7XG4gICAgZWwuc3R5bGUudHJhbnNpdGlvbiA9ICdpbml0aWFsJztcbiAgICBlbC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgZWwuc3R5bGUubWF4SGVpZ2h0ID0gJ2luaXRpYWwnO1xuICAgIHZhciBoZWlnaHQgPSBlbC5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCd2aXNpYmlsaXR5Jyk7XG4gICAgZWwuc3R5bGUubWF4SGVpZ2h0ID0gJzAnO1xuICAgIGVsLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gIFxuICAgIC8vIEJlZ2luIHRyYW5zaXRpb25cbiAgICBlbC5zdHlsZS53ZWJraXRUcmFuc2l0aW9uID0gJ21heC1oZWlnaHQgJyArIHRpbWluZyArICcsIG9wYWNpdHkgJyArIHRpbWluZyArICcnO1xuICAgIGVsLnN0eWxlLnRyYW5zaXRpb24gPSAnbWF4LWhlaWdodCAnICsgdGltaW5nICsgJywgb3BhY2l0eSAnICsgdGltaW5nICsgJyc7XG4gICAgdmFyIGVuZFNsaWRlRG93biA9IGZ1bmN0aW9uKCkge1xuICAgICAgZWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy13ZWJraXQtdHJhbnNpdGlvbicpO1xuICAgICAgZWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24nKTtcbiAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdvcGFjaXR5Jyk7XG4gICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZW5kU2xpZGVEb3duKTtcbiAgICB9O1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpIHtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBlbmRTbGlkZURvd24pO1xuICAgICAgZWwuc3R5bGUubWF4SGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgZWwuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICB9KTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIFNsaWRlIGFuIGVsZW1lbnQgdXAgbGlrZSBqUXVlcnkncyBzbGlkZVVwIGZ1bmN0aW9uIHVzaW5nIENTUzMgdHJhbnNpdGlvbnMuXG4gICAqIEBzZWUgaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vbHVkZGVyLzQyMjYyODhcbiAgICogQHBhcmFtICB7ZWxlbWVudH0gIGVsXG4gICAqIEBwYXJhbSAge3N0cmluZ30gICB0aW1pbmdcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIGZ1bmN0aW9uIHNsaWRlVXAoZWwsIHRpbWluZykge1xuICAgIHRpbWluZyA9IHRpbWluZyB8fCAnMzAwbXMgZWFzZSc7XG4gIFxuICAgIC8vIEdldCBlbGVtZW50IGhlaWdodFxuICAgIGVsLnN0eWxlLndlYmtpdFRyYW5zaXRpb24gPSAnaW5pdGlhbCc7XG4gICAgZWwuc3R5bGUudHJhbnNpdGlvbiA9ICdpbml0aWFsJztcbiAgICB2YXIgaGVpZ2h0ID0gZWwub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcbiAgICBlbC5zdHlsZS5tYXhIZWlnaHQgPSBoZWlnaHQ7XG4gICAgZWwuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgXG4gICAgLy8gQmVnaW4gdHJhbnNpdGlvblxuICAgIGVsLnN0eWxlLndlYmtpdFRyYW5zaXRpb24gPSAnbWF4LWhlaWdodCAnICsgdGltaW5nICsgJywgb3BhY2l0eSAnICsgdGltaW5nICsgJyc7XG4gICAgZWwuc3R5bGUudHJhbnNpdGlvbiA9ICdtYXgtaGVpZ2h0ICcgKyB0aW1pbmcgKyAnLCBvcGFjaXR5ICcgKyB0aW1pbmcgKyAnJztcbiAgICB2YXIgZW5kU2xpZGVEb3duID0gZnVuY3Rpb24oKSB7XG4gICAgICBlbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLXdlYmtpdC10cmFuc2l0aW9uJyk7XG4gICAgICBlbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndHJhbnNpdGlvbicpO1xuICAgICAgZWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ29wYWNpdHknKTtcbiAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBlbmRTbGlkZURvd24pO1xuICAgIH07XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGVuZFNsaWRlRG93bik7XG4gICAgICBlbC5zdHlsZS5tYXhIZWlnaHQgPSAnMCc7XG4gICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgIH0pO1xuICB9XG5cblxuXG4vKlxuICogQ3VzdG9tXG4gKi9cbiBjbGFzcyBEcm9wZG93biB7XG4gICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcbiAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgIHRoaXMuY29udGVudHMgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuanMtZHJvcGRvd24taXRlbS1jb250ZW50Jyk7XG4gICAgIHRoaXMubGlua3MgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuanMtZHJvcGRvd24taXRlbS1saW5rJyk7XG4gICAgIHRoaXMuaW5pdCgpO1xuICAgfVxuIFxuICAgaW5pdCgpIHtcbiAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnVwZGF0ZURyb3Bkb3duLmJpbmQodGhpcykpO1xuICAgfVxuIFxuICAgdXBkYXRlRHJvcGRvd24oZSkge1xuICAgICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gXG4gICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1kcm9wZG93bi1pdGVtLWxpbmsnKSkge1xuICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICBsZXQgcGFyZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5qcy1kcm9wZG93bi1pdGVtJyksXG4gICAgICAgICAgIGNvbnRlbnQgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLmpzLWRyb3Bkb3duLWl0ZW0tY29udGVudCcpO1xuIFxuICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1hY3RpdmUnKSkge1xuICAgICAgICAgdGhpcy5jbGVhckRyb3Bkb3duKCk7XG4gICAgICAgfSBlbHNlIHtcbiAgICAgICAgIHRoaXMuY2xlYXJEcm9wZG93bigpO1xuICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgc2xpZGVEb3duKGNvbnRlbnQpO1xuICAgICAgIH1cbiAgICAgfVxuICAgfVxuIFxuICAgY2xlYXJEcm9wZG93bigpIHtcbiAgICAgZm9yICh2YXIgZWxlbWVudCBvZiB0aGlzLmxpbmtzKSB7XG4gICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcbiAgICAgfVxuICAgICBmb3IgKHZhciBlbGVtZW50IG9mIHRoaXMuY29udGVudHMpIHtcbiAgICAgICBzbGlkZVVwKGVsZW1lbnQpO1xuICAgICB9XG4gICB9XG4gfVxuIGNsYXNzIE1lbnUge1xuICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XG4gICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICB0aGlzLm1lbnVTY3JvbGwgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuanMtbWVudS1zY3JvbGwnKTtcbiAgICAgdGhpcy5tZW51U2Nyb2xsVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLW1lbnUtc2hvdycpO1xuICAgICB0aGlzLmluaXQoKTtcbiAgIH1cbiBcbiAgIGluaXQoKSB7XG4gICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmNoZWNrTWVudVBvc2l0aW9uLmJpbmQodGhpcykpO1xuICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5jaGVja01lbnVQb3NpdGlvbi5iaW5kKHRoaXMpKTtcbiAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuc2Nyb2xsVG9FbGVtZW50LmJpbmQodGhpcykpO1xuICAgfVxuIFxuICAgY2hlY2tNZW51UG9zaXRpb24oKSB7XG4gICAgIGxldCB0YXJnZXRQb3NpdGlvbiA9IHRoaXMubWVudVNjcm9sbFRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgIHRhcmdldFBvc2l0aW9uVG9wID0gdGFyZ2V0UG9zaXRpb24udG9wO1xuIFxuICAgICBpZiAodGFyZ2V0UG9zaXRpb25Ub3AgPCAwKSB7XG4gICAgICAgdGhpcy5tZW51U2Nyb2xsLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xuICAgICB9IGVsc2Uge1xuICAgICAgIHRoaXMubWVudVNjcm9sbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcbiAgICAgfVxuICAgfVxuIFxuICAgc2Nyb2xsVG9FbGVtZW50KGUpIHtcbiAgICAgbGV0IHRhcmdldCA9IGUudGFyZ2V0O1xuIFxuICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnanMtbWVudS1saW5rLXNjcm9sbCcpKSB7XG4gICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgIGNvbnN0IE1FTlVfSEVJR0hUID0gNjU7XG4gICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSksXG4gICAgICAgICAgIHRhcmdldFBvc2l0aW9uID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgdGFyZ2V0UG9zaXRpb25Ub3AgPSB0YXJnZXRQb3NpdGlvbi50b3AgKyB3aW5kb3cucGFnZVlPZmZzZXQgLSBNRU5VX0hFSUdIVDtcbiBcbiAgICAgICBzY3JvbGxUbyh0YXJnZXRQb3NpdGlvblRvcCwgMTAwMCk7XG4gICAgIH1cbiAgIH1cbiB9XG4gY2xhc3MgVG9nZ2xlIHtcbiAgIGNvbnN0cnVjdG9yKCkge1xuICAgICB0aGlzLmluaXQoKTtcbiAgIH1cbiBcbiAgIGluaXQoKSB7XG4gICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnRvZ2dsZVN3aXRjaC5iaW5kKHRoaXMpKTtcbiAgIH1cbiBcbiAgIHRvZ2dsZVN3aXRjaChlKSB7XG4gICAgIGxldCB0YXJnZXQgPSBlLnRhcmdldDtcbiBcbiAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLXRvZ2dsZS1saW5rJykpIHtcbiAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgbGV0IHBhcmVudCA9IHRhcmdldC5jbG9zZXN0KCcuanMtdG9nZ2xlLWNvbnRhaW5lcicpLFxuICAgICAgICAgICBjb250ZW50ID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy10b2dnbGUtY29udGVudCcpO1xuIFxuICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1hY3RpdmUnKSkge1xuICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgIH0gZWxzZSB7XG4gICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XG4gICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgIH1cbiAgICAgfVxuICAgfVxuIH1cbiBjbGFzcyBUb29sdGlwcyB7XG4gICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgdGhpcy50b29sdGlwQ29udGVudHMgPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy10b29sdGlwLWNvbnRlbnQnKTtcbiAgICAgdGhpcy50b29sdGlwTGlua3MgPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy10b29sdGlwLWxpbmsnKTtcbiAgICAgdGhpcy5pbml0KCk7XG4gICB9XG4gXG4gICBpbml0KCkge1xuICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy50b2dnbGVUb29sdGlwLmJpbmQodGhpcykpO1xuICAgfVxuIFxuICAgdG9nZ2xlVG9vbHRpcChlKSB7XG4gICAgIGxldCB0YXJnZXQgPSBlLnRhcmdldDtcbiBcbiAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLXRvb2x0aXAtbGluaycpKSB7XG4gICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgIGxldCBwYXJlbnQgPSB0YXJnZXQuY2xvc2VzdCgnLmpzLXRvb2x0aXAtY29udGFpbmVyJyksXG4gICAgICAgICAgIGNvbnRlbnQgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLmpzLXRvb2x0aXAtY29udGVudCcpO1xuIFxuICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1hY3RpdmUnKSkge1xuICAgICAgICAgdGhpcy5jbGVhclRvb2x0aXBzKCk7XG4gICAgICAgfSBlbHNlIHtcbiAgICAgICAgIHRoaXMuY2xlYXJUb29sdGlwcygpO1xuICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKTtcbiAgICAgICB9XG4gICAgIH0gZWxzZSB7XG4gICAgICAgdGhpcy5jbGVhclRvb2x0aXBzKCk7XG4gICAgIH1cbiAgIH1cbiBcbiAgIGNsZWFyVG9vbHRpcHMoKSB7XG4gICAgIGZvciAodmFyIGVsZW1lbnQgb2YgdGhpcy50b29sdGlwQ29udGVudHMpIHtcbiAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xuICAgICB9XG4gICAgIGZvciAodmFyIGVsZW1lbnQgb2YgdGhpcy50b29sdGlwTGlua3MpIHtcbiAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xuICAgICB9XG4gICB9XG4gfVxuIGNsYXNzIFZpZXdlciB7XG4gICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgdGhpcy5pbml0KCk7XG4gICB9XG4gXG4gICBpbml0KCkge1xuICAgICB0aGlzLmluaXRDbGFzc2VzKCk7XG4gICB9XG4gXG4gICBpbml0Q2xhc3NlcygpIHtcbiAgICAgbGV0IGRyb3Bkb3ducyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1kcm9wZG93bi1jb250YWluZXInKTtcbiAgICAgZm9yICh2YXIgZWxlbWVudCBvZiBkcm9wZG93bnMpIHtcbiAgICAgICBuZXcgRHJvcGRvd24oZWxlbWVudCk7XG4gICAgIH1cbiBcbiAgICAgbGV0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtbWVudS1jb250YWluZXInKTtcbiAgICAgZm9yICh2YXIgZWxlbWVudCBvZiBtZW51KSB7XG4gICAgICAgbmV3IE1lbnUoZWxlbWVudCk7XG4gICAgIH1cbiBcbiAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy10b29sdGlwLWxpbmsnKS5sZW5ndGgpIHtcbiAgICAgICBuZXcgVG9vbHRpcHMoKTtcbiAgICAgfVxuIFxuICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLXRvZ2dsZS1saW5rJykubGVuZ3RoKSB7XG4gICAgICAgbmV3IFRvZ2dsZSgpO1xuICAgICB9XG4gICB9XG4gfVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICBuZXcgVmlld2VyKCk7XG59KTsiXX0=
